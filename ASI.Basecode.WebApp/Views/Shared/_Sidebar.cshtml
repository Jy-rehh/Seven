@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<!-- Sidebar Section -->
<div class="@((ViewBag.LoginView == true) ? "hide-navbar" : "")">
    <div class="sidebar" style="position: fixed; left: 0; height: 100%; width: 150px; background-color: #F3F3F3; display: flex; flex-direction: column; justify-content: space-between;">
        <div class="sidebar_menu" style="margin-top: 10px;">
            <button class="menu-btn" aria-label="Home" onclick="window.location.href = '@Url.Action("Index", "Home")';">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </button>
            <button class="menu-btn" aria-label="Expenses" onclick="window.location.href = '@Url.Action("Index", "Expense")';">
                <i class="fas fa-money-bill"></i>
                <span>Expenses</span>
            </button>
            <button class="menu-btn" aria-label="Category" onclick="window.location.href = '@Url.Action("Index", "Category")';">
                <i class="fas fa-folder"></i>
                <span>Category</span>
            </button>
            <button class="menu-btn" aria-label="Report" onclick="window.location.href = '@Url.Action("Index", "Report")';">
                <i class="fas fa-chart-bar"></i>
                <span>Report</span>
            </button>
            <button class="menu-btn" aria-label="Settings" onclick="window.location.href = '@Url.Action("Index", "Settings")';">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </button>

            <!-- Logout button positioned at the bottom -->
            <div class="logout-container" onclick="openModal()" style="cursor: pointer;">
                <button class="menu-btn logout-btn" aria-label="Logout">
                    <i class="fa-solid fa-right-from-bracket"></i>
                    Logout
                </button>
            </div>

        </div>
    </div>
</div>

<!-- Logout Confirmation Modal -->
<div id="logoutModal" class="logout-modal">
    <div class="logout-modal-content">
        <span class="logout-close-btn" onclick="closeModal()">&times;</span>
        <h2>Are you sure you want to log out?</h2>
        <div class="logout-modal-buttons">
            <button onclick="window.location.href='/Account/SignOutUser';" class="logout-confirm-btn">Yes, Log out</button>
            <button onclick="closeModal()" class="logout-cancel-btn">Cancel</button>
        </div>
    </div>
</div>

<script>
    // Get modal element
    var modal = document.getElementById("logoutModal");

    // Get the logout button and add event listener to show the modal
    var logoutButton = document.querySelector(".logout-btn");

    function openModal() {
        modal.style.display = "block";
    }

    // Close the modal if the user clicks on the close button
    function closeModal() {
        modal.style.display = "none";
    }

    // Close the modal if the user clicks outside the modal
    window.onclick = function (event) {
        if (event.target == modal) {
            closeModal();
        }
    };
</script>

<style>
    /* Modal Background (darkened screen effect) */
    .logout-modal {
        display: none; /* Hidden by default */
        position: fixed;
        z-index: 1000; /* Ensure it's on top */
        top: 0;
        left: 0;
        width: 100vw; /* Full width */
        height: 100vh; /* Full height */
        background-color: rgba(0, 0, 0, 0.6); /* Darken the screen */
    }

    /* Modal Content */
    .logout-modal-content {
        background-color: white;
        margin: 0;
        padding: 0;
        border: 1px solid #888;
        width: 400px; /* Fixed width for the modal */
        text-align: center;
        border-radius: 8px; /* Rounded corners */
        box-shadow: none; /* Remove any box shadow */
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%); /* Center the modal */
    }

    /* Close Button */
    .logout-close-btn {
        color: #aaa;
        font-size: 28px;
        font-weight: bold;
        position: absolute;
        top: 10px;
        right: 20px;
    }

        .logout-close-btn:hover,
        .logout-close-btn:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

    /* Header */
    .logout-modal h2 {
        background-color: #1A554F; /* Custom Header Color */
        color: white;
        padding: 15px;
        margin: 0;
        font-size: 18px;
        line-height: 1.3;
        text-align: center;
        border-radius: 8px 8px 0 0;
        width: 100%;
    }

    /* Modal Buttons */
    .logout-modal-buttons {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 20px;
        margin-bottom: 20px; /* Adjusted margin for proper spacing */
    }

    .logout-confirm-btn,
    .logout-cancel-btn {
        padding: 8px 15px; /* Smaller buttons */
        font-size: 14px;
        cursor: pointer;
        border: none;
        border-radius: 25px; /* Fully rounded buttons */
    }

    .logout-confirm-btn {
        background-color: #548E87; /* Custom color for 'Yes' */
        color: white;
    }

    .logout-cancel-btn {
        background-color: #FF7F7F; /* Custom color for 'No' */
        color: white;
    }

    .logout-confirm-btn:hover {
        background-color: #4e7c73;
    }

    .logout-cancel-btn:hover {
        background-color: #f06a6a;
    }
</style>
